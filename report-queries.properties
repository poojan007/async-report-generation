# Works for all rows or a specific borrower when :borrowerId is provided
borrower.current.holdings = SELECT \
  mb.borrower_name   AS borrowerName, \
  mi.serial_number   AS instrumentSerialNo, \
  mi.student_name    AS studentName, \
  mi.teacher_name    AS teacherName, \
  mit.description    AS instrument, \
  mi.last_loan_date  AS issueDate \
FROM mls_borrower mb \
JOIN mls_instrument mi ON mi.current_borrower_id = mb.id \
JOIN mls_instrument_type mit ON mit.id = mi.type_id \
WHERE (:borrowerId IS NULL OR mb.id = :borrowerId) \
ORDER BY mi.serial_number ASC, mi.last_loan_date DESC
